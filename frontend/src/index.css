@tailwind base;
@tailwind components;
@tailwind utilities;

/* Vditor 编辑器样式 */
.vditor-container {
  min-height: 400px;
}

.vditor-container .vditor {
  height: 100% !important;
  min-height: 400px;
}

.vditor-container .vditor__content {
  min-height: 300px;
}

/* 适配暗色模式 */
.dark .vditor-container .vditor {
  background-color: rgb(9 9 11);
}

.dark .vditor-container .vditor__content {
  background-color: rgb(9 9 11);
  color: rgb(250 250 250);
}

/* 隐藏预览区域的操作按钮 */
.vditor-preview__action {
  display: none !important;
}

/* 移动端优化 */
@media (max-width: 768px) {
  .vditor-container .vditor__toolbar {
    flex-wrap: wrap;
    padding: 4px;
  }
  
  .vditor-container .vditor__toolbar button {
    padding: 4px 8px;
    font-size: 12px;
  }
}

@layer base {
  :root {
    /* 背景色 - 纯白色 */
    --background: 0 0% 100%;
    --foreground: 270 15% 15%;
    
    /* 卡片 - 白色带轻微紫色调 */
    --card: 0 0% 100%;
    --card-foreground: 270 15% 15%;
    
    /* 弹出层 */
    --popover: 0 0% 100%;
    --popover-foreground: 270 15% 15%;
    
    /* 主色 - 紫葡萄色 */
    --primary: 280 60% 55%;
    --primary-foreground: 0 0% 100%;
    
    /* 次要色 - 浅紫色 */
    --secondary: 270 40% 96%;
    --secondary-foreground: 280 65% 30%;
    
    /* 柔和色 - 很浅的紫色 */
    --muted: 270 30% 96%;
    --muted-foreground: 270 20% 45%;
    
    /* 强调色 - 中等紫色 */
    --accent: 275 50% 92%;
    --accent-foreground: 280 65% 35%;
    
    /* 破坏性操作色 - 保持红色 */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    
    /* 边框和输入 - 浅紫灰色 */
    --border: 270 20% 88%;
    --input: 270 20% 88%;
    
    /* 焦点环 - 主色 */
    --ring: 280 60% 55%;
    
    /* 圆角 */
    --radius: 0.5rem;
    
    /* 自定义 - 渐变色 */
    --gradient-from: 280 70% 60%;
    --gradient-to: 290 65% 50%;
  }

  .dark {
    /* 背景色 - 深紫黑色 */
    --background: 270 25% 8%;
    --foreground: 270 10% 95%;
    
    /* 卡片 - 深紫色 */
    --card: 270 22% 12%;
    --card-foreground: 270 10% 95%;
    
    /* 弹出层 */
    --popover: 270 25% 10%;
    --popover-foreground: 270 10% 95%;
    
    /* 主色 - 亮紫色 */
    --primary: 280 65% 65%;
    --primary-foreground: 270 25% 8%;
    
    /* 次要色 - 深紫色 */
    --secondary: 270 25% 18%;
    --secondary-foreground: 270 10% 95%;
    
    /* 柔和色 */
    --muted: 270 20% 20%;
    --muted-foreground: 270 10% 65%;
    
    /* 强调色 */
    --accent: 275 30% 22%;
    --accent-foreground: 270 10% 95%;
    
    /* 破坏性操作色 */
    --destructive: 0 70% 55%;
    --destructive-foreground: 270 10% 95%;
    
    /* 边框和输入 */
    --border: 270 20% 25%;
    --input: 270 20% 25%;
    
    /* 焦点环 */
    --ring: 280 65% 60%;
    
    /* 自定义 - 渐变色 */
    --gradient-from: 280 70% 55%;
    --gradient-to: 290 65% 45%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* 自定义样式 */
.markdown-body {
  @apply prose prose-slate max-w-none dark:prose-invert;
  @apply prose-headings:font-bold prose-headings:tracking-tight;
  @apply prose-a:text-primary prose-a:no-underline hover:prose-a:underline;
  @apply prose-code:bg-muted prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md;
  @apply prose-code:before:content-none prose-code:after:content-none;
  @apply prose-pre:bg-muted prose-pre:border;
}

.note-card {
  @apply transition-all duration-200 hover:shadow-md hover:-translate-y-0.5;
}

/* 笔记卡片中的 Markdown 预览样式 */
.markdown-preview-card {
  @apply max-h-20 overflow-hidden;
}

.markdown-preview-card .markdown-body {
  @apply p-0 m-0 !important;
  @apply prose prose-slate max-w-none dark:prose-invert;
  @apply prose-sm;
  @apply prose-headings:mt-0 prose-headings:mb-1 prose-headings:text-sm;
  @apply prose-p:my-0.5 prose-p:text-xs prose-p:leading-relaxed;
  @apply prose-ul:my-0.5 prose-ol:my-0.5;
  @apply prose-li:my-0 prose-li:text-xs;
  @apply prose-code:text-[10px] prose-code:px-1 prose-code:py-0.5 prose-code:rounded;
  @apply prose-pre:my-0.5 prose-pre:text-[10px] prose-pre:overflow-hidden;
  @apply prose-blockquote:my-0.5 prose-blockquote:border-l-2 prose-blockquote:text-xs;
  @apply prose-hr:my-0.5;
  @apply prose-table:text-xs;
  @apply prose-strong:text-xs;
  @apply prose-em:text-xs;
}

.markdown-preview-card .markdown-body > * {
  @apply line-clamp-2;
}

.markdown-preview-card .markdown-body > *:last-child {
  @apply mb-0;
}

.save-indicator {
  @apply text-sm text-muted-foreground transition-opacity;
}

.save-indicator.saving {
  @apply opacity-100;
}

.save-indicator.saved {
  @apply opacity-70;
}

/* 滚动条样式 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-border rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-muted-foreground/50;
}

/* 代码高亮样式优化 */
pre[class*="language-"] {
  @apply rounded-lg border;
}

code[class*="language-"] {
  @apply text-sm;
}

/* 紫葡萄色主题增强样式 */
.grape-gradient {
  @apply bg-gradient-purple;
}

.grape-glow {
  box-shadow: 0 0 20px hsl(var(--primary) / 0.3);
}

.grape-border {
  @apply border-primary/20;
}

/* 卡片悬停效果 - 紫色主题 */
.card-hover-grape {
  @apply transition-all duration-300;
  @apply hover:shadow-lg hover:shadow-primary/10;
  @apply hover:border-primary/30;
  @apply hover:-translate-y-1;
}

/* 按钮脉冲动画 */
.pulse-grape {
  animation: pulse-grape 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse-grape {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: .7;
  }
}

/* 渐变文字效果 */
.text-gradient-grape {
  @apply bg-gradient-purple bg-clip-text text-transparent;
}

/* 紫色选中状态 */
::selection {
  background-color: hsl(var(--primary) / 0.3);
  color: hsl(var(--foreground));
}

/* 焦点状态增强 */
.focus-grape:focus-visible {
  @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
}

/* 侧边栏装饰 */
.sidebar-accent {
  @apply border-l-4 border-l-primary/20;
  @apply hover:border-l-primary/60;
  @apply transition-colors duration-200;
}

/* 加载动画 - 紫色主题 */
.spinner-grape {
  border: 3px solid hsl(var(--muted));
  border-top: 3px solid hsl(var(--primary));
  border-radius: 50%;
  width: 24px;
  height: 24px;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 页面标题装饰 */
.page-title-grape {
  @apply relative;
}

.page-title-grape::after {
  content: '';
  @apply absolute -bottom-2 left-0 h-1 w-16 bg-gradient-purple rounded-full;
}

/* 标签样式增强 */
.tag-grape {
  @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  @apply bg-primary/10 text-primary;
  @apply border border-primary/20;
  @apply hover:bg-primary/20 transition-colors;
}

/* 通知点样式 */
.notification-dot {
  @apply relative;
}

.notification-dot::after {
  content: '';
  @apply absolute -top-1 -right-1 h-2 w-2 bg-primary rounded-full;
  animation: pulse-grape 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
